<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            font-weight: 400;
        }

        h3,h4,h5 {
            font-weight: 300 !important;
        }

        .calendar-wrapper {
            height: auto;
            max-width: 730px;
            margin: 0 auto;
        }

        .calendar-header {
            background-color: rgba(18, 15, 25, 0.25);
            height: 100%;
            padding: 20px;
            color: #fff;
            font-family: 'Roboto', sans-serif;
            font-weight: 300;
            position: relative;
        }

        .header-title {
            padding-left: 15%;
        }

        .header-background {
            background-image: url("https://raw.githubusercontent.com/JustMonk/codepen-resource-project/master/img/compressed-header.jpg");
            height: 200px;
            background-position: center right;
            background-size: cover;
        }

        .calendar-content {
            background-color: #fff;
            padding: 20px;
            padding-left: 15%;
            padding-right: 15%;
            overflow: hidden;
        }

        .event-mark {
            width: 5px;
            height: 5px;
            background-color: teal;
            border-radius: 100px;
            position: absolute;
            left: 46%;
            top: 70%;
        }

        .calendar-footer {
            height: 200px;
            font-family: 'Roboto', sans-serif;
            font-weight: 300;
            text-align: center;
            background-color: #4b6289 !important;
            position: relative;
            overflow: hidden;
        }

        .addForm {
            position: absolute;
            top: 100%;
            width: 100%;
            height: 100%;
            background-color: #4b5889 !important;
            transition: top 0.5s cubic-bezier(1, 0, 0, 1);
            padding: 0 5px 0 5px;
        }

        .addForm input {
            color: #fff;
        }

        .addForm .row {
            padding-left: 0.75rem;
            padding-right: 0.75rem;
            margin-bottom: 0;
        }

        .addForm h4 {
            color: #fff;
            margin-bottom: 1rem;
        }

        .addEventButtons {
            text-align: right;
            padding: 0 0.75rem 0 0.75rem;
        }

        .addEventButtons a {
            color: black;
            font-weight: 300;
        }

        .emptyForm {
            padding: 20px;
            padding-left: 15%;
            padding-right: 15%;
        }

        .emptyForm h4 {
            color: #fff;
            margin-bottom: 2rem;
        }

        .sidebar-wrapper {
            color: #fff;
            background-color: #5a649c !important;
            padding-top: 0;
            padding-bottom: 20px;
            font-family: 'Roboto', sans-serif;
            font-weight: 300;
            padding-left: 0;
            padding-right: 0;
        }

        .sidebar-title {
            padding: 50px 6% 50px 12%;
        }

        .sidebar-title h4 {
            margin-top: 0;
        }

        .sidebar-events {
            overflow-x: hidden;
            overflow-y: hidden;
            margin-bottom: 70px;
        }

        .empty-message {
            font-size: 1.2rem;
            padding: 15px 6% 15px 12%;
        }

        .eventCard {
            background-color: #fff;
            color: black;
            padding: 12px 24px 12px 24px;
            border-bottom: 1px solid #E5E5E5;
            white-space: nowrap;
            position: relative;
            animation: slideInDown 0.5s;
        }

        .eventCard-header {
            font-weight: bold;
        }

        .eventCard-description {
            color: grey;
        }

        .eventCard-mark-wrapper {
            position: absolute;
            right: 0;
            top: 0;
            height: 100%;
            width: 60px;
            background: linear-gradient(to right, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 1) 25%, rgba(255, 255, 255, 1) 100%);
        }

        .eventCard-mark {
            width: 8px;
            height: 8px;
            background-color: #b39ddb;
            border-radius: 100px;
            position: absolute;
            left: 50%;
            top: 45%;
        }

        .day-mark {
            width: 7px;
            height: 7px;
            background-color: #b39ddb;
            border-radius: 100px;
            position: absolute;
            left: 47%;
            top: 67%;
        }

        .content-wrapper {
            padding-top: 50px;
            padding-bottom: 50px;
            margin-left: 300px;
        }

        #table-body .col:hover {
            cursor: pointer;
            background-color: #E0E0E0;
        }

        .empty-day:hover {
            cursor: default !important;
            background-color: #fff !important;
        }

        #table-body .row .col {
            padding: .75rem;
        }

        #table-body .col {
            border: 1px solid transparent;
        }

        #calendar-table {
            text-align: center;
        }

        .prev-button {
            position: absolute;
            cursor: pointer;
            left: 0%;
            top: 35%;
            color: grey !important;
        }

        .prev-button i {
            font-size: 4em;
        }

        .next-button {
            position: absolute;
            cursor: pointer;
            right: 0%;
            top: 35%;
            color: grey !important;
        }

        .next-button i {
            font-size: 4em;
        }

        .addEvent {
            box-shadow: 0 5px 15px rgb(57, 168, 228);
            background-color: #39a8e4;
            padding: 10px;
            padding-left: 3em;
            padding-right: 3em;
            cursor: pointer;
            border-radius: 25px;
            color: #fff !important;
            background-image: linear-gradient(135deg, #8d8dd4, #45ced4);
        }

        .addEvent:hover {
            transition: box-shadow 0.5s;
            box-shadow: 0 4px 25px rgb(57, 168, 228);
        }

        .mobile-header {
            padding: 0;
            display: none;
            padding-top: 20px;
            padding-bottom: 20px;
            position: fixed;
            z-index: 99;
            width: 100%;
            background-color: #5a649c !important;
        }

        .mobile-header a i {
            color: #fff;
            font-size: 38px;
        }

        .mobile-header h4 {
            color: #fff;
        }

        .mobile-header .row {
            margin-bottom: 0;
        }

        .mobile-header h4 {
            margin: 0;
            font-family: 'Roboto', sans-serif;
            font-weight: 300;
        }

        @media (max-width:992px) {
            .content-wrapper {
                margin-left: 0;
            }

            .mobile-header {
                display: block;
            }

            .calendar-wrapper {
                margin-top: 80px;
            }

            .sidebar-wrapper {
                background-color: #EEEEEE !important;
            }

            .sidebar-title {
                background-color: #5A649C !important;
            }

            .empty-message {
                color: black;
                font-weight: 300;
                font-size: 1.2rem;
                padding: 15px;
            }
        }
    </style>
</head>

<body>

    <div class="mobile-header z-depth-1">

        <div class="row">
            <div class="col-2">
                <a href="#" data-activates="sidebar" class="button-collapse" style="">
                    <i class="material-icons">menu</i>
                </a>
            </div>
            <div class="col">
                <h4>Events</h4>
            </div>
        </div>

    </div>

    <div class="main-wrapper">

        <div class="sidebar-wrapper z-depth-2 side-nav fixed" id="sidebar">

            <div class="sidebar-title">
                <h4>Calendar Events</h4>
            </div>

            <div class="sidebar-events" id="sidebar-events">
                <div class="empty-message">
                    <h4>No event added yet</h4>
                </div>
            </div>

        </div>

        <div class="content-wrapper">
            <div class="calendar-wrapper">
                <div class="calendar-header">
                    <div class="header-title">
                        <h3>December</h3>
                    </div>
                    <div class="header-background"></div>
                    <div class="addEvent" id="addEvent">Add new event</div>
                </div>

                <div class="calendar-content">
                    <table id="calendar-table">
                        <thead>
                            <tr>
                                <th>Sun</th>
                                <th>Mon</th>
                                <th>Tue</th>
                                <th>Wed</th>
                                <th>Thu</th>
                                <th>Fri</th>
                                <th>Sat</th>
                            </tr>
                        </thead>
                        <tbody id="table-body"></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div class="addForm" id="add-form">
        <div class="emptyForm">
            <h4>Add New Event</h4>
            <div class="row">
                <div class="input-field col s12">
                    <input id="event-title" type="text" class="validate">
                    <label for="event-title">Event Title</label>
                </div>
            </div>

            <div class="row">
                <div class="input-field col s12">
                    <textarea id="event-description" class="materialize-textarea"></textarea>
                    <label for="event-description">Event Description</label>
                </div>
            </div>

            <div class="addEventButtons">
                <a href="javascript:void(0);" class="btn btn-flat" id="add-event-button">Add</a>
                <a href="javascript:void(0);" class="btn btn-flat" id="cancel-add-event">Cancel</a>
            </div>
        </div>
    </div>

    <script>
        $(document).ready(function () {

            // Initialize materialize
            $('.button-collapse').sideNav();

            const calendarData = {};

            function renderCalendar(month, year) {
                let date = new Date(year, month);
                let firstDay = date.getDay();
                let lastDate = new Date(year, month + 1, 0).getDate();

                const tbody = $('#table-body');
                tbody.empty();

                let row = $('<tr></tr>');
                let dayCount = 1;

                // Fill in the empty days before the first day of the month
                for (let i = 0; i < firstDay; i++) {
                    row.append('<td class="empty-day"></td>');
                }

                // Fill in the days of the month
                for (let i = firstDay; i < 7; i++) {
                    row.append(`<td class="col" data-day="${dayCount}">${dayCount}</td>`);
                    dayCount++;
                }
                tbody.append(row);

                // Continue filling in the calendar
                for (let i = 7; i < lastDate + firstDay; i++) {
                    if (i % 7 === 0) {
                        row = $('<tr></tr>');
                    }
                    row.append(`<td class="col" data-day="${dayCount}">${dayCount}</td>`);
                    dayCount++;
                    if (i % 7 === 6) {
                        tbody.append(row);
                    }
                }
            }

            $('#addEvent').click(function () {
                $('#add-form').css('top', '0%');
            });

            $('#cancel-add-event').click(function () {
                $('#add-form').css('top', '100%');
            });

            $('#add-event-button').click(function () {
                let title = $('#event-title').val();
                let description = $('#event-description').val();
                let day = $('#table-body td.selected').data('day');

                if (title && day) {
                    if (!calendarData[day]) {
                        calendarData[day] = [];
                    }
                    calendarData[day].push({ title, description });

                    $('#add-form').css('top', '100%');
                    renderCalendar(11, 2024);
                }
            });

            $(document).on('click', '#table-body td', function () {
                let day = $(this).data('day');
                $('#sidebar-events').empty();
                $('#sidebar-events').append(`<div class="empty-message"><h4>Events for Day ${day}</h4></div>`);
                if (calendarData[day]) {
                    calendarData[day].forEach(event => {
                        $('#sidebar-events').append(`
                            <div class="eventCard">
                                <div class="eventCard-header">${event.title}</div>
                                <div class="eventCard-description">${event.description}</div>
                            </div>
                        `);
                    });
                }
            });

            renderCalendar(11, 2024);
        });
    </script>

</body>
</html>
